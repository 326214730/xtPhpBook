# Chapter6 变量和数据类型
## 变量
程序就是使用计算机的运算能力对一系列的数值进行高效的计算，这些数值在程序中存放的位置，就是**变量**。PHP是弱类型语言，所以和其他语言相比，PHP对变量支持**无需声明，可以直接使用**。

一个PHP变量使用美元符号`$`来标识，美元符号后跟上变量名即为一个变量。例如下面一行代码定义了一个变量a，它的值是100。

```php
$a = 100;
```

一行代码也是一条语句，在PHP中，一条语句以分号`;`结束。

变量都会有默认值，如果变量没有进行赋值而直接使用，就会引用到变量的默认值。默认值依变量类型而定。具体我们在变量类型中进行详细介绍。

## 数据类型
变量也有类型，程序会根据变量的类型来存放不同种类的变量。整数存在整型变量中，小数存在浮点型变量中，字符串存在字符串类型的变量中……等等。由于PHP是弱类型语言，所以对变量类型的要求不会像C、Java等语言那样要求十分严格。在变量类型方面，我们开发时尽管使用就好。如果没有遇到变量类型引发的问题，我们在开发过程中是不需要特别关注变量类型的。

下表列举了PHP中常见的数据类型。

|PHP关键字|变量类型|默认值|举例|
|:--:|:--:|:--:|:--:|
|int、integer|整型|0|`$a = 3;`|
|float、double|浮点型|0|`$a = 3.3;`|
|bool、boolean|布尔型|false|`$a = true;`|
|string|字符串类型|''|`$a = 'This is a string';`|
|array|数组类型|[]|`$a = array('key' => 'value');`|
|null|空类型|null|`$a;var_dump($a);`|

此外，还有object（对象）类型，在这里不作列举，等到接触过**PHP的面向对象特性**之后，你就会了解object类型了。

## 获取变量的数据类型
PHP的内置函数`gettype`可以获取到变量的类型，返回字符串形式的变量类型的英文单词。

同时也可以使用`var_dump`来输出变量，也可以获取到变量的类型。

```php
<?php
	$a = 3;
	$b = 3.3;
	$c = true;
	$d = 'This is a string';
	$e = ['key' => 'value'];
	$f;

	echo 'a的变量类型是：'.gettype($a).'<br/>';
	echo 'b的变量类型是：'.gettype($b).'<br/>';
	echo 'c的变量类型是：'.gettype($c).'<br/>';
	echo 'd的变量类型是：'.gettype($d).'<br/>';
	echo 'e的变量类型是：'.gettype($e).'<br/>';
	echo 'f的变量类型是：'.gettype($f).'<br/>';

	var_dump($a);
	var_dump($b);
	var_dump($c);
	var_dump($d);
	var_dump($e);
	var_dump($f);
```

这篇代码的运行结果是
![](/pic/5-3.png)

可以看到，`gettype`函数只能获取到变量类型的字符串，而`var_dump`则可以输出变量类型和变量的值。两个方法适用场景不同，在未来的开发中都有可能会用到。

## 判断变量是否属于某一个变量类型
PHP内置了一系列的判断类型的函数，它们统一的命名规则是`is_type()`。它们的参数都是一个变量，返回值都是bool类型，如果该变量是对应的类型则返回`true`，否则返回`false`。这一组函数列举如下。

|函数名	|别名|作用|
|:--:|:--:|:--:|
|`is_int`|`is_integer`、`is_long`|是否为整型|
|`is_float`|`is_double`|是否为浮点型|
|`is_string`||是否为字符串|
|`is_bool`||是否为布尔型|
|`is_null`||是否是NULL|
|`is_array`||是否为数组|
|`is_object`||是否为对象|
|`is_numeric`||是否为数字或数字字符串|

## “空”
在PHP中，有几种与“空”相关的变量，需要特别注意。
### 空字符串
如下这种方式创建的字符串就是空字符串，在获取前端传来的数据时很常见。
```php
$a = '';
```
或者是
```php
$b = "";
```
### null
null是PHP中一种特殊的类型，叫做“空类型”。通常只有这两种方式来创建一个空类型的变量：
```php
$a;
```
```php
$a = null;
```
### 判断是否为空
可以使用`is_null`这个函数来判断变量的值是否为空。如果对应数组的话，可以使用`empty`函数来判断数组是否为空。如果是字符串，则可以使用`$a == ''`这种方式来判断字符串是否为空。
### 判断变量是否定义
变量为空与变量未定义是两种完全不同的状态，而且这两种状态容易混淆。变量为空，意味着变量已经定义，但是没有赋值，或者因为某种原因，导致变量没有了值；变量未定义，是指在当前程序中根本没有存在过要使用的变量。

变量是否已经定义，可以使用`isset`函数来判断。

## 强制类型转换
由于PHP是弱类型语言，变量会由系统根据变量值自动指派一个变量类型，这种机制虽然方便，但对有些场景来说是有缺陷的。当我们需要自己指派一个变量的类型的时候，就用到了**强制类型转换**。

强制类型转换的方式是，在变量左边加上`(type)`形式的变量类型关键字。例如

```php
$a = '123';
$b = (int)$a;
```

会将本来是字符串的变量$a强制转换为整型。

强制类型转换在某些情况下可能会使变量值的精度受损，或者是丢失值。例如

```php
$a = 123.45;
(int)$a;		// $a => 123
```
会使a的值变成123，直接丢失掉小数点后面的值。

这种情况

```php
$a = 'abc';
(bool)$a;		// $a => true
```
会使a的值变成true。

当遇到一些奇怪的使用场景时，强制类型转换就会变得不那么可控，例如

```php
$a = null;
(string)$a; 	// $a => ''
```

所以，强制类型转换的功能应妥善使用，根据需求使用即可。切勿将毫无关联的两种类型互相转换，类似的操作会使程序增加更多的不可控因素。